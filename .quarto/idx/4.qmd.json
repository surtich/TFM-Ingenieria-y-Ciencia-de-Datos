{"title":"Leemos el tibble preprocesado","markdown":{"headingText":"Leemos el tibble preprocesado","containsRefs":false,"markdown":"```{r}\nsource(\"_setup.R\")\n```\n\n```{r}\ntest_all_df <- read_csv(\"./data/preprocess/test_all.csv\", show_col_types = FALSE)\n\ntest_all_df <- test_all_df %>% mutate(Seq = ifelse(Group == \"A\", \"AB\", \"BA\"))\n\n# Nos quedamos con los estudiantes que solo han hecho un test\nunique_tests_df <- test_all_df %>%\n    group_by(User) %>%\n    mutate(Rows = n()) %>%\n    filter(Rows == 1) %>%\n    ungroup()\n\n\nunique_count <- unique_tests_df %>% count(Seq)\n\n# Eliminamos aquellos estudiantes que no han hecho uno de los test\ntest_all_df <- test_all_df %>%\n    group_by(User) %>%\n    mutate(Rows = n()) %>%\n    filter(Rows > 1) %>%\n    ungroup()\n```\n\n\n\n# Modelado estadístico {#sec-modelado}\n\nEste capítulo comienza con un análisis exploratorio de los datos. Continúa\nproponiendo diversas formas de adecuar el modelado estadístico\nque se explicó en el Marco Teórico (ver @sec-arte) al diseño del experimento\ndel subtitulado. La selección de los modelos se realiza en el @sec-resultados.\n\n## Análisis Exploratorio {#sec-eda}\n\n\nComo se explica en la @tbl-variables, al subtitulado se le denomina tratamiento y a sus niveles (correcto e incorrecto) se les ha llamado $A$ y $B$ sin hacer ninguna conjetura de cual de los dos es el subtitulado correcto. El grupo con secuencia $AB$ será el que primero vio el vídeo con subtitulado $A$ y luego el $B$. Análogamente, el grupo con secuencia $BA$ vio los vídeos en orden inverso. Recuérdese que el nivel 0 de respuesta se corresponde con \"No sé / No contesto\" (ver @tbl-likert-levels). Tras eliminar los test de los `r no_want_users` estudiantes que no dieron su consentimiento para participar en el estudio y los de los `r n_users -  n_distinct(df_all$Subject)` estudiantes que no realizaron el segundo test, las dos cohortes están equilibradas ya que hay `r (df_all %>% distinct(Seq, Subject) %>%   group_by(Seq) %>% count() %>% filter(Seq==\"AB\"))$n` estudiantes que realizaron el test con secuencia $AB$ y `r (df_all %>% distinct(Seq, Subject) %>% group_by(Seq) %>% count() %>% filter(Seq==\"BA\"))$n` con secuencia $BA$.\n\n```{r}\n#| label: fig-groups\n#| fig-cap: Estudiantes asignados a cada grupo.\n#| fig-height: 2\n#| eval: false\n\ndf_all %>%\n    distinct(Seq, Subject) %>%\n    group_by(Seq) %>%\n    count() %>%\n    ggplot(aes(x = Seq, y = n, fill = Seq)) +\n    geom_bar(stat = \"identity\") +\n    geom_text(aes(label = n, y = n / 2), size = 6) +\n    geom_text(aes(label = Seq, y = -3), size = 6) +\n    theme_void() +\n    theme(\n        legend.position = \"none\", plot.title = element_text(hjust = 0.6)\n    )\n```\n\n### Análisis de la calidad de los datos\n\nEn esta sección se analiza si hay test que tienen valores de respuesta que puedan resultar anómalos. \nEn los test no se ha observado ningún valor nulo ni erróneo.\n\n```{r}\nwashout_cut_1 <- 300\nwashout_cut_2 <- 120\nvideo_duration <- 43\n\n# Calculamos el tiempo transcurrido entre la realización de los test\nwashout_periods_df <- test_all_df %>%\n    dplyr::select(User, Test, Row, LastTry, Group) %>%\n    pivot_wider(id_cols = c(User, Group), names_from = Test, values_from = c(Row, LastTry), names_prefix = \"Test\") %>%\n    mutate(diff_sec = difftime(LastTry_Test02, LastTry_Test01, units = \"secs\")) %>%\n    dplyr::select(Group, Row_Test01, Row_Test02, User, diff_sec)\n\n```\n\nEl campo `LastTry` contiene la fecha y hora de realización del test. Con esta información se puede conocer el tiempo que transcurrió desde que un estudiante rellenó el primer test hasta que completó el segundo. Dado que los vídeos duran 43 segundos y hay 18 ítems, se puede estimar el tiempo medio que cada estudiante empleó en contestar cada ítem suponiendo que haya visto el segundo vídeo completo. La @tbl-washout muestra que hay algunos test en los que los estudiantes emplearon un tiempo muy breve en contestar\n^[Hay que tener en cuenta que la duración de vídeo es de algo más de 40 segundos y que los estudiantes tienen que contestar un test de 18 ítems.].\n\n```{r}\n#| label: tbl-washout\n#| tbl-cap: Tiempos de realización de la segunda actividad de duración inferior a 2 minutos.\n\nwashout_periods_df %>%\n    filter(diff_sec < washout_cut_2) %>%\n    mutate(Test = ifelse(Group == \"A\", \"B\", \"A\"), by_question = round((diff_sec - video_duration) / 18, 2)) %>%\n    arrange(diff_sec) %>%\n    dplyr::select(Subject = User, Test, \"Spent time (secs)\" = diff_sec, \"Time by Item (secs)\" = by_question) %>%\n    gt()\n```\n\n```{r}\n# Calculamos cuántas respuestas diferentes tiene cada test\n\nn_questions <- sum(startsWith(colnames(test_all_df), \"Q\"))\n\ntest_lg_df <- test_all_df %>% pivot_longer(cols = all_of(starts_with(\"Q\")), names_to = \"Item\", values_to = \"Response\")\n\ndistinct_response_df <- test_lg_df %>%\n    group_by(Row, Test, Seq, User) %>%\n    count(Response)\n\n\n\ndistinct_cut_1 <- 2\ndistinct_cut_2 <- 1\n\n\ndistinct_response__summary_df <- distinct_response_df %>%\n    count() %>%\n    ungroup() %>%\n    dplyr::select(n) %>%\n    group_by(n) %>%\n    count() %>%\n    ungroup()\n```\n\n\n\nLa @fig-distinct muestra que hay `r (distinct_response__summary_df %>%\n    filter(n == distinct_cut_1))$nn`\ntest en los que el estudiante contestó a todos los ítems usando únicamente `r distinct_cut_1` respuestas diferentes.\nAdemás hay `r (distinct_response__summary_df %>%\n    filter(n == distinct_cut_2))$nn` \n    test en los que se contestaron todos los ítems con `r distinct_cut_2` respuesta.\n\n```{r}\n#| label: fig-distinct\n#| fig-cap: Número de respuestas diferentes en un mismo test.\n#| warning: false\n\ndistinct_response__summary_df <- distinct_response_df %>%\n    count() %>%\n    ungroup() %>%\n    dplyr::select(n) %>%\n    group_by(n) %>%\n    count()\n\ndistinct_response__summary_df %>%\n    ggplot(aes(x = n, y = nn, fill = factor(n))) +\n    geom_bar(stat = \"identity\") +\n    theme_void() +\n    theme(legend.position = \"none\", plot.title = element_text(hjust = 0.5), axis.title = element_text(size = 10), axis.title.y = element_text(margin = margin(t = 0, r = 30, b = 0, l = 0), angle = 90), axis.text.y = element_blank()) +\n    geom_text(aes(label = n, y = 3), size = 7) +\n    geom_text(aes(label = nn), nudge_y = 1.5, size = 5) +\n    labs(y = \"Total de test\", x = \"Respuestas diferentes por test\")\n\n```\n\nLa tabla @tbl-distinct2 muestra los test de respuesta única y el valor de esa respuesta. Se aprecia que la mayoría de estos test tienen valor de respuesta 4, la secuencia mayoritaria es la $BA$ y el test el $A$. El estudiante 4 responde ambos test utilizando el mismo valor de respuesta en todos los ítems.\n\n\\clearpage\n\n```{r}\n#| label: tbl-distinct2\n#| tbl-cap: Test en los que todos los ítems se contestan con el mismo valor de respuesta.\n\ndistinct_response_df %>%\n    filter(n == n_questions) %>%\n    arrange(Response, Seq, Test) %>%\n    ungroup() %>%\n    mutate(Test = ifelse(Seq == \"AB\", ifelse(Test == \"01\", \"A\", \"B\"), ifelse(Test == \"01\", \"B\", \"A\"))) %>%\n    dplyr::select(Response, Seq, Test, \"Subject\" = User) %>%\n    gt()\n```\n\n```{r}\n# Calculamos cuántas respuestas diferentes hay entre los dos test para cada estudiante\n\ncompare_test_df <- test_lg_df %>%\n    group_by(User, Item) %>%\n    arrange(User, Item) %>%\n    mutate(n = as.numeric(Response != lag(Response))) %>%\n    arrange(User, Item) %>%\n    filter(row_number() %% 2 == 0) %>%\n    summarize(Total = sum(n)) %>%\n    summarize(Total = sum(Total))\n\n```\n\nLa @fig-compare presenta la distribución de la cantidad de respuestas cuyo valor cambia entre los dos test que realiza cada estudiante. La mayoría de los estudiantes cambian entre uno y otro test entre 11 y 17 respuestas. Tan solo `r compare_test_df %>% filter(Total == 0) %>% nrow()` estudiante respondió a todos los ítems con el mismo valor en los dos test. Por otro lado, no hay test que tengan un número excesivo de contestaciones \"No sé/No contesto\" (ver @tbl-noanswer).\n\n\n```{r}\n#| label: fig-compare\n#| fig-cap: Número de respuestas diferentes entre los test para cada estudiante.\n\ncompare_test_df %>%\n    count(Total) %>%\n    mutate(Total = factor(Total, levels = 0:max(Total))) %>%\n    ggplot(aes(x = Total, y = n, fill = Total)) +\n    geom_bar(stat = \"identity\") +\n    theme_void() +\n    theme(legend.position = \"none\", plot.title = element_text(hjust = 0.5), axis.title = element_text(size = 10), axis.title.y = element_text(margin = margin(t = 0, r = 30, b = 0, l = 0), angle = 90), axis.text.y = element_blank()) +\n    geom_text(aes(label = Total, y = 0.5), size = 6) +\n    geom_text(aes(label = n), nudge_y = 0.5, size = 5) +\n    labs(y = \"Total de test\", x = \"Número de respuestas diferentes\") +\n    scale_x_discrete(drop = FALSE)\n```\n\n\\clearpage\n\n```{r}\n#| label: tbl-noanswer\n#| tbl-cap: Los 5 test con más respuestas 'No sé / No contesto'\ntest_lg_df %>%\n    mutate(Test = ifelse(Group == \"A\", ifelse(Test == \"01\", \"A\", \"B\"), ifelse(Test == \"01\", \"B\", \"A\"))) %>%\n    filter(Response == 5) %>%\n    group_by(Test, Row, User) %>%\n    count() %>%\n    arrange(desc(n)) %>%\n    ungroup() %>%\n    dplyr::select(Test, \"Subject\" = User, `Total answers by test` = n) %>%\n    head(5) %>%\n    gt()\n```\n\nEn resumen, se constata que algunos test tienen valores que no parecen muy razonables. Por ejemplo, no parece razonable realizar la actividad en menos de `r washout_cut_2` segundos. Además en algunos test hay poca variabilidad en las respuestas. Sin embargo, no son muchos los test con estas características así que se ha decidido mantener estos datos a pesar de que se pueda dudar de si en ellos los estudiantes contestaron con la debida atención y diligencia.\n\n### Comparación de los subtítulos $A$ y $B$ entre grupos {#sec-eda-3}\n\nLa @fig-diff presenta una forma de comparar los dos test realizados por los estudiantes. Para cada estudiante se comparó ítem a ítem sus dos test y se contabilizó la diferencia entre el número de ítems en los que la puntuación en el segundo vídeo fue superior y en los que lo fue inferior (las que no variaron de puntuación no se consideraron). En el eje $x$ se muestran las diferencias entre respuestas. Cantidades negativas indican que hay más respuestas en el segundo de los test que han empeorado respecto al primero de las que han mejorado. En el eje $y$ se representa el número de estudiantes para cada diferencia. Esta frecuencia se representa en negativo cuando la diferencia en el eje x sea negativa para facilitar la comparación^[En la comparación se han omitido aquellas respuestas en las que el estudiante contestó \"No sé / No contesto\" en el ítem correspondiente de uno de los test.]. Esto es una forma de evaluar si el estudiante valoró mejor el segundo vídeo que el primero. \n\n\n```{r}\ncompare_test_user_df <- test_lg_df %>%\n    group_by(Seq, User, Item) %>%\n    arrange(User, Item, Test) %>%\n    mutate(n = if_else(Response != 5 & lag(Response) != 5, sign(Response - lag(Response)), 0)) %>%\n    arrange(User, Item, Test) %>%\n    filter(row_number() %% 2 == 0) %>%\n    summarize(Total = sum(n)) %>%\n    summarize(Total = sum(Total))\n\ncompare_test_df <- compare_test_user_df %>%\n    count(Total) %>%\n    mutate(n = if_else(Total >= 0, n, -n))\n```\n\n```{r}\n#| label: fig-diff\n#| fig-cap: Diferencias en las respuestas entre test por estudiante y grupo.\n#| fig-pos: h\n#| fig-height: 8\n#| fig-width: 12\n\ncompare_test_df %>% ggplot(aes(x = Total, y = n, fill = Total >= 0)) +\n    geom_bar(stat = \"identity\") +\n    scale_fill_manual(values = c(\"darkred\", \"darkblue\")) +\n    facet_wrap(~Seq, nrow = 2, scales = \"free_y\", labeller = function(variable, value) {\n        paste0(\"Seq \", value)\n    }) +\n    theme(\n        legend.position = \"none\",\n        axis.title = element_text(size = 15),\n        strip.text = element_text(size = 16), strip.background = element_blank(), panel.grid.minor = element_blank()\n    ) +\n    scale_y_continuous(\n        breaks = -15:15\n    ) +\n    scale_x_continuous(\n        breaks = -18:18\n    ) +\n    labs(y = \"Cantidad de test (negativo cuando x sea negativo)\", x = \"Diferencias entre test de un estudiante (negativo cuando el segundo test es valorado peor)\")\n```\n\nSe aprecia que en el grupo $AB$ las diferencias tienden a ser negativas y en el $BA$ positivas. Esto estaría indicando que los estudiantes valoran mejor el subtitulado de nivel $A$ en ambas secuencias. Por ello, es esperable que las respuestas de los estudiantes del grupo $AB$ hayan empeorado y que las diferencias sean negativas y que lo contrario haya sucedido con las del grupo $BA$. La diferencia más frecuente en el grupo $AB$ es `r -((compare_test_df %>% arrange(n)) %>% head(1))$Total` y en el grupo $BA$ este valor es `r ((compare_test_df %>% arrange(n)) %>% tail(1))$Total`.\nResulta llamativo que haya estudiantes cuyas contestaciones estén tan alejadas de la tendencia de su grupo. En la @tbl-diff se muestran los tiempos que han transcurrido entre la realización de los test de aquellos estudiantes cuyas respuestas difieren de forma importante de su grupo. Son aquellos que aparecen en azul en la secuencia $AB$ y en rojo en la secuencia $BA$. Se observa que casi todos son tiempos entre actividades muy cortos. En cualquier caso y, como no son muchos, se ha decidido no eliminarlos y realizar el análisis con ellos.\n\n```{r}\n#| label: tbl-diff\n#| tbl-cap: Estudiantes que tienen diferencias en sus respuestas muy alejadas de la tendencia de su grupo.\nleft_join(compare_test_user_df %>% filter(Seq == \"AB\" & Total >= 0 | Seq == \"BA\" & Total <= 0), test_all_df %>% dplyr::select(Row, User, Test, LastTry) %>%\n    pivot_wider(names_from = Test, values_from = c(Row, LastTry))) %>%\n    rename(Diff = Total) %>%\n    arrange(desc(Diff), Seq, User) %>%\n    filter(abs(Diff) >= 7) %>%\n    mutate(Minutes = round(difftime(LastTry_02, LastTry_01, units = \"mins\"), 2)) %>%\n    ungroup() %>%\n    dplyr::select(Seq, \"Subject\" = User, Diff, Minutes) %>%\n    gt()\n```\n\n```{r}\ndf_freqs <- df_all %>%\n    group_by(Period, Seq, Treat) %>%\n    count(Response) %>%\n    mutate(freq = n / sum(n)) %>%\n    ungroup()\n\n\ndf_freqs_treat <- df_all %>%\n    group_by(Treat) %>%\n    count(Response) %>%\n    mutate(freq = n / sum(n)) %>%\n    ungroup()\n\ndf_freqs_period <- df_all %>%\n    group_by(Period) %>%\n    count(Response) %>%\n    mutate(freq = n / sum(n)) %>%\n    ungroup()\n\n\ndf_freqs_seq <- df_all %>%\n    group_by(Seq) %>%\n    count(Response) %>%\n    mutate(freq = n / sum(n)) %>%\n    ungroup()\n\n\nfilter_in <- function(df, ...) {\n    # Convertir los argumentos en una lista\n    arg_list <- list(...)\n\n    # Filtrar por cada columna y valor\n    for (arg in names(arg_list)) {\n        if (!is.null(arg_list[[arg]])) {\n            df <- df[df[[arg]] %in% arg_list[[arg]], ]\n        }\n    }\n\n    return(df)\n}\n\n\n\nformat_freq <- function(freq) {\n    paste(round(100 * freq, 0), \"%\", sep = \"\")\n}\n\nget_freqs <- function(df = df_freqs, ...) {\n    format_freq(sum(filter_in(df, ...) %>% dplyr::select(freq)))\n}\n```\n\n\n\n\n```{r}\ndf_resume <- df_all %>%\n    dplyr::select(Subject, Period, Seq, Treat, Response, Item) %>%\n    group_by(Seq, Period, Treat) %>%\n    count(Response) %>%\n    ungroup()\n\nmin_freq_response <- min(df_resume$n)\nmax_freq_response <- max(df_resume$n)\nwine_red <- \"#58181F\"\n\n```\n\n```{r}\n#| label: tbl-resume\n#| tbl-cap: Resumen de frecuencias de respuesta.\ndf_resume %>%\n    pivot_wider(id_cols = c(Seq, Period, Treat), names_from = Response, values_from = n) %>%\n    gt() %>%\n    tab_spanner(columns = `1`:`5`, label = \"Response\") %>%\n    data_color(\n        columns = `1`:`5`,\n        colors = scales::col_numeric(\n            palette = c(\"white\", wine_red), domain = c(min_freq_response, max_freq_response)\n        )\n    )\n```\n\n\nEn la @tbl-resume se muestra la frecuencia absoluta del valor de respuesta para cada grupo y test en todos los ítems. Esta es otra forma de comparar los niveles de subtitulado. La @fig-freqs muestra la misma información gráficamente y con frecuencias relativas. En esta figura se pueden apreciar algunas cuestiones interesantes:\n\n* El tratamiento (subtitulado) con nivel $A$ presenta claramente mayores valores de respuesta que el $B$ como ya se había visto (ver @fig-diff).\n\n* En general los dos grupos ($AB$ y $BA$) muestran bastante acuerdo en el subtitulado en ambos niveles: En el nivel de tratamiento $A$ los dos grupos tienen una frecuencia relativa similar de respuestas positivas (valores 4 y 5). El grupo $AB$ tiene un `r get_freqs(Seq=\"AB\", Treat=\"A\", Response=c(4,5))` de respuestas positivas y el grupo $BA$ `r get_freqs(Seq=\"BA\", Treat=\"A\", Response=c(4,5))`. No obstante, el grupo $AB$ tiene más respuestas con valor 5 que el grupo $BA$ (`r get_freqs(Seq=\"AB\", Treat=\"A\", Response=5)` frente a `r get_freqs(Seq=\"BA\", Treat=\"A\", Response=5)`). La valoración es también similar entre grupos en el nivel de tratamiento $B$: el grupo $AB$ tiene `r get_freqs(Seq=\"AB\", Treat=\"B\", Response=c(4,5))` de respuestas positivas y `r get_freqs(Seq=\"BA\", Treat=\"B\", Response=c(4,5))` el grupo $BA$. Las valoraciones negativas (1, 2), la neutra (3) y la 'No sé / No contesto' (0) son también muy similares en ambos grupos.\n\n```{r}\n#| label: fig-freqs\n#| fig-cap: Frecuencias relativas de las respuestas al test.\n#| fig-height: 6\n#| fig-pos: h\n\nlevel_labeller <- function(variable, value) {\n    paste0(variable, \" \", value)\n}\n\n\ndf_freqs %>%\n    ggplot(aes(\n        x = Response, y = freq,\n        fill = Response\n    )) +\n    geom_bar(stat = \"identity\") +\n    facet_wrap(~ Seq + Period + Treat, nrow = 2, labeller = level_labeller) +\n    geom_text(aes(label = Response, y = 0.9), size = 5) +\n    geom_text(aes(label = formatC(freq, digits = 2, format = \"f\")), nudge_y = 0.1, size = 4) +\n    ylim(0, 1) +\n    theme(\n        legend.position = \"none\",\n        axis.line.x = element_blank(),\n        axis.ticks.x = element_blank(),\n        axis.text.x = element_blank(),\n        strip.text = element_text(size = 16), strip.background = element_blank()\n    ) +\n    labs(y = \"Frecuencia relativa de respuesta\", x = \"Valor de la respuesta\")\n```\n\nEl análisis marginalizado de tratamiento, secuencia y periodo tiene estos resultados referidos a los ítems con contestación positiva (4, 5):\n\n* El tratamiento $A$ tiene un `r get_freqs(df_freqs_treat, Treat=\"A\", Response=c(4,5))` marginalizado de respuestas positivas frente al `r get_freqs(df_freqs_treat, Treat=\"B\", Response=c(4,5))` del tratamiento $B$.\n\n* El periodo 1 tiene un `r get_freqs(df_freqs_period, Period=1, Response=c(4,5))` marginalizado de respuestas positivas frente al `r get_freqs(df_freqs_period, Period=2, Response=c(4,5))` del periodo 2.\n\n* Finalmente, la secuencia $AB$ tiene un `r get_freqs(df_freqs_seq, Seq=\"AB\", Response=c(4,5))`\nde respuestas positivas frente `r get_freqs(df_freqs_seq, Seq=\"BA\", Response=c(4,5))` de la secuencia $BA$.\n\n\n### Análisis de los ítems\n\n```{r}\nlikert_df <- df_response %>% pivot_wider(names_from = Item, values_from = Response_l, id_cols = c(Seq, Period, Subject, Treat))\n```\n\nEl gráfico @fig-levels muestra la frecuencia relativa por grupo y por test de los ítems clasificados por niveles de respuesta, considerando que:\n\n * Los niveles 1 y 2 se consideran valoraciones negativas.\n * El nivel 3 se considera neutro.\n * Los niveles 4 y 5 se consideran positivos.\n * El nivel 0 (\"No sé / No contesto\") se excluye en este análisis.\n\nSe muestra en primer lugar el ítem 18 por ser una valoración global del subtitulado y que resume la opinión que sobre el mismo tiene el estudiante. Se vuelve a constatar que el subtitulado $A$ es mejor valorado por los estudiantes, pero ahora se confirma que en los 18 ítems ambos grupos tienen más puntuaciones positivas y menos negativas en el subtitulado $A$ que en el $B$. También se vuelve a constatar que los dos grupos valoran de forma muy similar los dos niveles de subtitulado en todos los ítems. En el nivel de subtitulado $A$ los ítems $Q15$, $Q16$ y $Q17$ obtienen relativamente peores valoraciones (consultar la @tbl-likert-scale para ver el texto de los ítems) y estas son similares en ambos subtitulados. Hay algunos ítems que son valorados de forma muy positiva incluso en el nivel de subtitulado $B$ (por ejemplo $Q04$ o $Q13$). Por último, los ítems $Q05$ y $Q09$ (también la $Q14$ pero solo para el grupo $BA$) tienen una valoración muy negativa en el nivel de subtitulado $B$.\n\n```{r}\n#| label: fig-levels\n#| out-width: \\\\widthw\n#| fig-height: 6\n#| fig-cap: Frecuencias relativas de las respuestas por ítem.\n\ndf_response %>%\n    group_by(Seq, Treat, Item, Level) %>%\n    mutate(Item = factor(Item, levels = rev(levels(Item)))) %>%\n    count(Response) %>%\n    ggplot(aes(x = Item, y = n, fill = Level)) +\n    geom_bar(position = \"fill\", stat = \"identity\") +\n    scale_y_continuous(labels = scales::percent, expand = c(0, 0)) +\n    scale_fill_brewer(name = \"Level:\", type = \"div\", palette = \"Spectral\") +\n    ylab(\"Percentage\") +\n    theme_bw() +\n    theme(legend.position = \"top\", axis.text.y = element_text(size = 7)) +\n    facet_grid(rows = vars(Seq), cols = vars(Treat)) +\n    coord_flip() +\n    labs(x = \"Item\", y = \"Percentage\", fill = \"Response\")\n```\n\n```{r}\n#| eval: false\n#| include: false\n#| label: fig-likert\n#| layout-ncol: 2\n#| fig-height: 10\n#| fig-cap: Ítems ordenadas por valoración.\n#| fig-subcap:\n#|   - \"Seq AB , Treat A\"\n#|   - \"Seq AB , Treat B\"\n#|   - \"Seq BA , Treat A\"\n#|   - \"Seq BA , Treat B\"\nlikert_df %>%\n    filter(Seq == \"AB\" & Treat == \"A\") %>%\n    dplyr::select(-c(Subject, Treat, Period, Seq)) %>%\n    data.frame() %>%\n    likert() %>%\n    plot()\n\nlikert_df %>%\n    filter(Seq == \"AB\" & Treat == \"B\") %>%\n    dplyr::select(-c(Subject, Treat, Period, Seq)) %>%\n    data.frame() %>%\n    likert() %>%\n    plot()\nlikert_df %>%\n    filter(Seq == \"BA\" & Treat == \"A\") %>%\n    dplyr::select(-c(Subject, Treat, Period, Seq)) %>%\n    data.frame() %>%\n    likert() %>%\n    plot()\n\nlikert_df %>%\n    filter(Seq == \"BA\" & Treat == \"B\") %>%\n    dplyr::select(-c(Subject, Treat, Period, Seq)) %>%\n    data.frame() %>%\n    likert() %>%\n    plot()\n```\n\nEn la @tbl-no-response se muestran las contestaciones \"No sé / No contesto\" por subtitulado e ítem\n^[Solo se muestran los ítems que tienen respuestas \"No sé / No contesto\" en alguno de los subtitulados.]. Se observa que hay relativamente pocas contestaciones \"No sé / No contesto\" y que éstas se concentran en los ítems $Q14$, $Q15$, $Q16$ y $Q17$.\nEl número de respuestas \"No sé / No contesto\" está razonablemente equilibrado entre\nsubtitulados excepto en el ítem $Q10$. \n\n\\small\n```{r}\n#| label: tbl-no-response\n#| tbl-cap: Contestaciones \"No sé / No contesto\" por nivel de subtitulado e ítem\ndf_all %>%\n    filter(Response == 0) %>%\n    group_by(Treat, Item, .drop = F) %>%\n    count() %>%\n    arrange(Treat, Item) %>%\n    pivot_wider(id_cols = c(Treat), names_from = c(Item), values_from = c(n)) %>%\n    select_if(~ !all(. == 0)) %>%\n    gt()\n```\n\\normalsize\n\n{{< include 4.1.qmd >}}","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"4.html"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","other-links-title":"Otros Enlaces","code-links-title":"Enlaces de código","launch-dev-container-title":"Iniciar Dev Container","launch-binder-title":"Iniciar Binder","article-notebook-label":"Cuaderno de Artículo","notebook-preview-download":"Descargar Cuaderno","notebook-preview-download-src":"Descargar código fuente","notebook-preview-back":"Volver al Artículo","manuscript-meca-bundle":"Archivo MECA","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","title-block-keywords":"Palabras clave","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-wordcount":"Conteo de Palabras","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados","listing-page-words":"{0} palabras"},"metadata":{"lang":"es","fig-responsive":true,"quarto-version":"1.4.489","bibliography":["references.bib"],"otherlangs":["en-US"],"opts_chunk":{"comment":"","collapse":true},"theme":"cosmo","csl":"https://www.zotero.org/styles/chicago-author-date"},"extensions":{"book":{"multiFile":true}}},"pdf":{"identifier":{"display-name":"PDF","target-format":"pdf","base-format":"pdf"},"execute":{"fig-width":7,"fig-height":3.5,"fig-format":"pdf","fig-dpi":300,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":true,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"pdf","fig-align":"default","fig-pos":"h","fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"pdf-engine":"xelatex","standalone":true,"variables":{"graphics":true,"tables":true},"default-image-extension":"pdf","to":"pdf","toc-depth":3,"cite-method":"biblatex","include-in-header":["latex/preamble.tex"],"output-file":"4.pdf"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","other-links-title":"Otros Enlaces","code-links-title":"Enlaces de código","launch-dev-container-title":"Iniciar Dev Container","launch-binder-title":"Iniciar Binder","article-notebook-label":"Cuaderno de Artículo","notebook-preview-download":"Descargar Cuaderno","notebook-preview-download-src":"Descargar código fuente","notebook-preview-back":"Volver al Artículo","manuscript-meca-bundle":"Archivo MECA","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","title-block-keywords":"Palabras clave","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-wordcount":"Conteo de Palabras","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados","listing-page-words":"{0} palabras"},"metadata":{"block-headings":true,"bibliography":["references.bib"],"lang":"es","otherlangs":["en-US"],"opts_chunk":{"comment":"","collapse":true},"papersize":"A4","fontsize":"12pt","mainfont":"texgyretermes","mathfont":"texgyretermes-math.otf","MemoirChapStyle":"daleif1","MemoirPageStyle":"Ruled","largemargins":false,"smallmargin":"1.5in","largemargin":"3in","marginnote":"1.8in","spinemargin":"1.5in","uppermargin":"1.5in","lowermargin":"1in","toc-title":"Contenidos","secnum-depth":"section","lot":true,"lof":true,"chaptersummary":"En resumen","fig_crop":true,"urlcolor":"blue","maintitlepage":{"epigraph":"This document is reproducible thanks to:\n\\begin{itemize}\n  \\item \\LaTeX and its class memoir (\\url{http://www.ctan.org/pkg/memoir}).\n  \\item R (\\url{http://www.r-project.org/}) and RStudio (\\url{http://www.rstudio.com/})\n  \\item bookdown (\\url{http://bookdown.org/}) and memoiR (\\url{https://ericmarcon.github.io/memoiR/})\n\\end{itemize}\n","credits":"Name of the owner of the logo\n\n\\url{http://www.company.com}\n\nAn explanatory sentence.\nLeave an empty line for line breaks.\n","logo":"images/logo.png"},"biblatexoptions":["backend=biber","style=authoryear","isbn=false","backref=true","giveninits=true","uniquename=init","maxcitenames=2","maxbibnames=150","sorting=nyt","sortcites=false"],"longbibliography":false,"graphicspath":"images","documentclass":"memoir","classoption":["extrafontsizes","onecolumn","openright","table"],"mainfontoptions":["Extension=.otf","UprightFont=*-regular","BoldFont=*-bold","BoldItalicFont=*-bolditalic","ItalicFont=*-italic"],"template-partials":["partials/pandoc.tex","partials/title.tex","partials/before-body.tex","partials/toc.tex","partials/biblio.tex","partials/after-body.tex"],"csquotes":true,"link-citations":true},"extensions":{"book":{"selfContainedOutput":true}}}},"projectFormats":["html","markdown","pdf"]}